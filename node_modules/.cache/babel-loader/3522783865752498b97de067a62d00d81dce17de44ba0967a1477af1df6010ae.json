{"ast":null,"code":"import { ref, onBeforeUnmount } from 'vue';\nimport WebSocketClient from 'ws';\nexport default {\n  setup() {\n    const connectionStatus = ref('Not connected');\n    let socket = null;\n    const connectWebSocket = () => {\n      socket = new WebSocketClient('wss://32zhhpmuta.execute-api.us-east-1.amazonaws.com/production');\n      socket.onopen = () => {\n        connectionStatus.value = 'Connected';\n        console.log('WebSocket connection opened.');\n      };\n      socket.onmessage = event => {\n        console.log('Received message:', event.data);\n      };\n      socket.onerror = error => {\n        console.error('WebSocket error:', error);\n        setTimeout(() => {\n          connectWebSocket(); // Retry after a delay\n        }, 1000); // Retry after 1 second\n      };\n\n      socket.onclose = () => {\n        connectionStatus.value = 'Disconnected';\n        console.log('WebSocket connection closed.');\n      };\n    };\n    const sendMessage = () => {\n      if (socket && socket.readyState === WebSocket.OPEN) {\n        socket.send('Hello from Vue.js');\n        console.log('Sent message: Hello from Vue.js');\n      } else {\n        console.log(\"not sending\");\n      }\n    };\n    onBeforeUnmount(() => {\n      if (socket) {\n        socket.close();\n        console.log('WebSocket connection closed during component unmount.');\n      }\n    });\n    return {\n      connectionStatus,\n      connectWebSocket,\n      sendMessage\n    };\n  }\n};","map":{"version":3,"names":["ref","onBeforeUnmount","WebSocketClient","setup","connectionStatus","socket","connectWebSocket","onopen","value","console","log","onmessage","event","data","onerror","error","setTimeout","onclose","sendMessage","readyState","WebSocket","OPEN","send","close"],"sources":["D:\\Project\\PROOFOFCONCEPT3\\VueJS_Flask_Socket-main\\VueJS_Flask_Socket-main\\src\\components\\HelloWorld.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>WebSocket Connection Example</h1>\n    <p>Status: {{ connectionStatus }}</p>\n    <button @click=\"sendMessage\">Send Message</button>\n  </div>\n</template>\n\n<script>\nimport { ref, onBeforeUnmount } from 'vue';\nimport WebSocketClient from 'ws';\n\nexport default {\n  setup() {\n    const connectionStatus = ref('Not connected');\n    let socket = null;\n\n    const connectWebSocket = () => {\n      socket = new WebSocketClient('wss://32zhhpmuta.execute-api.us-east-1.amazonaws.com/production');\n\n      socket.onopen = () => {\n        connectionStatus.value = 'Connected';\n        console.log('WebSocket connection opened.');\n      };\n\n      socket.onmessage = (event) => {\n        console.log('Received message:', event.data);\n      };\n\n      socket.onerror = (error) => {\n    console.error('WebSocket error:', error);\n    setTimeout(() => {\n      connectWebSocket(); // Retry after a delay\n    }, 1000); // Retry after 1 second\n  };\n\n      socket.onclose = () => {\n        connectionStatus.value = 'Disconnected';\n        console.log('WebSocket connection closed.');\n      };\n    };\n\n    const sendMessage = () => {\n      if (socket && socket.readyState === WebSocket.OPEN) {\n        socket.send('Hello from Vue.js');\n        console.log('Sent message: Hello from Vue.js');\n      } else{\n        console.log(\"not sending\");\n      }\n    };\n\n    onBeforeUnmount(() => {\n      if (socket) {\n        socket.close();\n        console.log('WebSocket connection closed during component unmount.');\n      }\n    });\n\n    return {\n      connectionStatus,\n      connectWebSocket,\n      sendMessage,\n    };\n  },\n};\n</script>\n\n<style>\n/* Add your CSS styles here */\n</style>\n"],"mappings":"AASA,SAASA,GAAG,EAAEC,eAAc,QAAS,KAAK;AAC1C,OAAOC,eAAc,MAAO,IAAI;AAEhC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,gBAAe,GAAIJ,GAAG,CAAC,eAAe,CAAC;IAC7C,IAAIK,MAAK,GAAI,IAAI;IAEjB,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7BD,MAAK,GAAI,IAAIH,eAAe,CAAC,iEAAiE,CAAC;MAE/FG,MAAM,CAACE,MAAK,GAAI,MAAM;QACpBH,gBAAgB,CAACI,KAAI,GAAI,WAAW;QACpCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC7C,CAAC;MAEDL,MAAM,CAACM,SAAQ,GAAKC,KAAK,IAAK;QAC5BH,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,KAAK,CAACC,IAAI,CAAC;MAC9C,CAAC;MAEDR,MAAM,CAACS,OAAM,GAAKC,KAAK,IAAK;QAC9BN,OAAO,CAACM,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;QACxCC,UAAU,CAAC,MAAM;UACfV,gBAAgB,CAAC,CAAC,EAAE;QACtB,CAAC,EAAE,IAAI,CAAC,EAAE;MACZ,CAAC;;MAEGD,MAAM,CAACY,OAAM,GAAI,MAAM;QACrBb,gBAAgB,CAACI,KAAI,GAAI,cAAc;QACvCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC7C,CAAC;IACH,CAAC;IAED,MAAMQ,WAAU,GAAIA,CAAA,KAAM;MACxB,IAAIb,MAAK,IAAKA,MAAM,CAACc,UAAS,KAAMC,SAAS,CAACC,IAAI,EAAE;QAClDhB,MAAM,CAACiB,IAAI,CAAC,mBAAmB,CAAC;QAChCb,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAChD,OAAM;QACJD,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC5B;IACF,CAAC;IAEDT,eAAe,CAAC,MAAM;MACpB,IAAII,MAAM,EAAE;QACVA,MAAM,CAACkB,KAAK,CAAC,CAAC;QACdd,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;MACtE;IACF,CAAC,CAAC;IAEF,OAAO;MACLN,gBAAgB;MAChBE,gBAAgB;MAChBY;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}